"use strict";$((function(){var e=Quill.import("formats/font");e.whitelist=["sofia","slabo","roboto","inconsolata","ubuntu"],Quill.register(e,!0);var t=$(".compose-email"),o=$("#compose-mail"),s=$(".menu-toggle"),a=$(".sidebar-toggle"),l=$(".sidebar-left"),i=$(".sidebar-menu-list"),n=$(".email-app-list"),c=$(".email-user-list"),r=$(".email-user-list .custom-checkbox"),d=$(".email-scroll-area"),h=$("#email-to"),m=$("#emailCC"),p=$("#emailBCC"),u=$(".toggle-cc"),g=$(".toggle-bcc"),f=$(".cc-wrapper"),v=$(".bcc-wrapper"),w=$(".email-app-details"),k=$(".list-group-messages"),C=$(".go-back"),b=$(".email-application .email-favorite"),S=$(".user-action"),x=$(".mail-delete"),y=$(".mail-unread"),P=$("#email-search"),M=$("#message-editor .editor"),O=$(".body-content-overlay"),T="rtl"===$("html").attr("data-textdirection"),B="../../../app-assets/";if("laravel"===$("body").attr("data-framework")&&(B=$("body").attr("data-asset-path")),v.length&&v.toggle(),f&&f.toggle(),g.length&&g.on("click",(function(){v.toggle()})),u.length&&u.on("click",(function(){f.toggle()})),$.app.menu.is_touch_device())$(i).css("overflow","scroll"),$(c).css("overflow","scroll"),$(d).css("overflow","scroll");else{if($(i).length>0)new PerfectScrollbar(i[0]);if($(c).length>0)new PerfectScrollbar(c[0]);if($(d).length>0)new PerfectScrollbar(d[0])}function D(e){if(!e.id)return e.text;var t=feather.icons.user.toSvg({class:"mr-0"});return $(e.element).data("avatar")&&(t="<img src='"+B+"images/avatars/"+$(e.element).data("avatar")+"' alt='avatar' />"),"<div class='d-flex flex-wrap align-items-center'><div class='avatar avatar-sm my-0 mr-50'><span class='avatar-content'>"+t+"</span></div>"+e.text+"</div>"}if(h.length&&h.wrap('<div class="position-relative"></div>').select2({placeholder:"Select value",dropdownParent:h.parent(),closeOnSelect:!1,templateResult:D,templateSelection:D,tags:!0,tokenSeparators:[","," "],escapeMarkup:function(e){return e}}),m.length&&m.wrap('<div class="position-relative"></div>').select2({placeholder:"Select value",dropdownParent:m.parent(),closeOnSelect:!1,templateResult:D,templateSelection:D,tags:!0,tokenSeparators:[","," "],escapeMarkup:function(e){return e}}),p.length&&p.wrap('<div class="position-relative"></div>').select2({placeholder:"Select value",dropdownParent:p.parent(),closeOnSelect:!1,templateResult:D,templateSelection:D,tags:!0,tokenSeparators:[","," "],escapeMarkup:function(e){return e}}),t.length&&t.on("click",(function(){O.removeClass("show"),l.removeClass("show"),$(".compose-form input").val(""),h.val([]).trigger("change"),m.val([]).trigger("change"),p.val([]).trigger("change"),f.hide(),v.hide(),$(".compose-form .ql-editor")[0].innerHTML=""})),s.length&&s.on("click",(function(e){l.removeClass("show"),O.removeClass("show")})),a.length&&a.on("click",(function(e){e.stopPropagation(),l.toggleClass("show"),O.addClass("show")})),O.length&&O.on("click",(function(e){l.removeClass("show"),O.removeClass("show")})),c.find("li").length&&c.find("li").on("click",(function(e){w.toggleClass("show")})),k.find("a").length&&k.find("a").on("click",(function(){k.find("a").hasClass("active")&&k.find("a").removeClass("active"),$(this).addClass("active")})),C.length&&C.on("click",(function(e){e.stopPropagation(),w.removeClass("show")})),b.length&&b.on("click",(function(e){$(this).find("svg").toggleClass("favorite"),e.stopPropagation(),$(this).find("svg").hasClass("favorite")&&toastr.success("Updated mail to favorite","Favorite Mail ⭐️",{closeButton:!0,tapToDismiss:!1,rtl:T})})),$(window).width()>768&&O.hasClass("show")&&O.removeClass("show"),r.length&&(r.on("click",(function(e){e.stopPropagation()})),r.find("input").on("change",(function(e){e.stopPropagation();var t=$(this);t.is(":checked")?t.closest(".media").addClass("selected-row-bg"):t.closest(".media").removeClass("selected-row-bg")}))),$(document).on("click",".email-app-list .selectAll input",(function(){$(this).is(":checked")?S.find(".custom-checkbox input").prop("checked",this.checked).closest(".media").addClass("selected-row-bg"):S.find(".custom-checkbox input").prop("checked","").closest(".media").removeClass("selected-row-bg")})),x.length&&x.on("click",(function(){S.find(".custom-checkbox input:checked").length&&(S.find(".custom-checkbox input:checked").closest(".media").remove(),n.find(".selectAll input").prop("checked",!1),toastr.error("You have removed email.","Mail Deleted!",{closeButton:!0,tapToDismiss:!1,rtl:T}),S.find(".custom-checkbox input").prop("checked",""))})),y.length&&y.on("click",(function(){S.find(".custom-checkbox input:checked").closest(".media").removeClass("mail-read")})),P.length&&P.on("keyup",(function(){var e=$(this).val().toLowerCase();""!==e?(c.find(".email-media-list li").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})),0==c.find(".email-media-list li:visible").length?(c.find(".no-results").addClass("show"),c.animate({scrollTop:"0"},500)):c.find(".no-results").hasClass("show")&&c.find(".no-results").removeClass("show")):(c.find(".email-media-list li").show(),c.find(".no-results").hasClass("show")&&c.find(".no-results").removeClass("show"))})),M.length)new Quill(M[0],{bounds:"#message-editor .editor",modules:{formula:!0,syntax:!0,toolbar:".compose-editor-toolbar"},placeholder:"Message",theme:"snow"});$(".nav-link-search, .bookmark-star").on("click",(function(){o.modal("hide")}))})),$(window).on("resize",(function(){var e=$(".sidebar-left");$(window).width()>768&&$(".app-content .body-content-overlay").hasClass("show")&&(e.removeClass("show"),$(".app-content .body-content-overlay").removeClass("show"))}));