"use strict";$((function(){var t,e=$(".task-due-date"),o=$(".sidebar-todo-modal"),a=$("#form-modal-todo"),s=$(".todo-item-favorite"),i=$(".modal-title"),l=$(".add-todo-item"),n=$(".add-task button"),d=$(".update-todo-item"),r=$(".update-btn"),c=$("#task-desc"),m=$("#task-assigned"),h=$("#task-tag"),p=$(".body-content-overlay"),u=$(".menu-toggle"),v=$(".sidebar-toggle"),g=$(".sidebar-left"),f=$(".sidebar-menu-list"),w=$("#todo-search"),b=$(".sort-asc"),k=$(".sort-desc"),C=$(".todo-task-list"),y=$(".todo-task-list-wrapper"),x=$(".list-group-filters"),T=$(".no-results"),D=100,j="rtl"===$("html").attr("data-textdirection"),M="../../../app-assets/";if("laravel"===$("body").attr("data-framework")&&(M=$("body").attr("data-asset-path")),$.app.menu.is_touch_device())f.css("overflow","scroll"),y.css("overflow","scroll");else{if(f.length>0)new PerfectScrollbar(f[0],{theme:"dark"});if(y.length>0)new PerfectScrollbar(y[0],{theme:"dark"})}x.length&&x.find("a").on("click",(function(){x.find("a").hasClass("active")&&x.find("a").removeClass("active"),$(this).addClass("active")}));var S=document.getElementById("todo-task-list");function q(t){return t.id?'<div class="media align-items-center"><img class="d-block rounded-circle mr-50" src="'+$(t.element).data("img")+'" height="26" width="26" alt="'+t.text+'"><div class="media-body"><p class="mb-0">'+t.text+"</p></div></div>":t.text}if(void 0!==typeof S&&null!==S&&dragula([S],{moves:function(t,e,o){return o.classList.contains("drag-icon")}}),u.length&&u.on("click",(function(t){g.removeClass("show"),p.removeClass("show")})),v.length&&v.on("click",(function(t){t.stopPropagation(),g.toggleClass("show"),p.addClass("show")})),p.length&&p.on("click",(function(t){g.removeClass("show"),p.removeClass("show"),$(o).modal("hide")})),m.length&&(m.wrap('<div class="position-relative"></div>'),m.select2({placeholder:"Unassigned",dropdownParent:m.parent(),templateResult:q,templateSelection:q,escapeMarkup:function(t){return t}})),h.length&&(h.wrap('<div class="position-relative"></div>'),h.select2({placeholder:"Select tag"})),s.length&&$(s).on("click",(function(){$(this).toggleClass("text-warning")})),e.length&&e.flatpickr({dateFormat:"Y-m-d",defaultDate:"today",onReady:function(t,e,o){o.isMobile&&$(o.mobileInput).attr("step",null)}}),c.length)new Quill("#task-desc",{bounds:"#task-desc",modules:{formula:!0,syntax:!0,toolbar:".desc-toolbar"},placeholder:"Write Your Description",theme:"snow"});n.length&&n.on("click",(function(t){l.removeClass("d-none"),r.addClass("d-none"),i.text("Add Task"),g.removeClass("show"),p.removeClass("show"),o.find(".new-todo-item-title").val(""),c.find(".ql-editor")[0].innerHTML=""})),a.length&&(a.validate({ignore:".ql-container *",rules:{todoTitleAdd:{required:!0},"task-assigned":{required:!0},"task-due-date":{required:!0}}}),a.on("submit",(function(t){if(t.preventDefault(),a.valid()){D++;var e=$("#task-assigned").val(),s="",i={"Phill Buffer":M+"images/portrait/small/avatar-s-3.jpg","Chandler Bing":M+"images/portrait/small/avatar-s-1.jpg","Ross Geller":M+"images/portrait/small/avatar-s-4.jpg","Monica Geller":M+"images/portrait/small/avatar-s-6.jpg","Joey Tribbiani":M+"images/portrait/small/avatar-s-2.jpg","Rachel Green":M+"images/portrait/small/avatar-s-11.jpg"},l=$(".sidebar-todo-modal .new-todo-item-title").val(),n=$(".sidebar-todo-modal .task-due-date").val(),d=new Date(n),r=new Intl.DateTimeFormat("en",{month:"short"}).format(d)+" "+new Intl.DateTimeFormat("en",{day:"2-digit"}).format(d),c=$(".task-tag").val(),m={Team:"primary",Low:"success",Medium:"warning",High:"danger",Update:"info"};$.each(c,(function(t,e){s+='<div class="badge badge-pill badge-light-'+m[e]+' mr-50">'+e+"</div>"})),""!=l&&$(C).prepend('<li class="todo-item"><div class="todo-title-wrapper"><div class="todo-title-area">'+feather.icons["more-vertical"].toSvg({class:"drag-icon"})+'<div class="title-wrapper"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="customCheck'+D+'" /><label class="custom-control-label" for="customCheck'+D+'"></label></div><span class="todo-title">'+l+'</span></div></div><div class="todo-item-action"><div class="badge-wrapper mr-1">'+s+'</div><small class="text-nowrap text-muted mr-1">'+r+'</small><div class="avatar"><img src="'+i[e]+'" alt="'+e+'" height="28" width="28"></div></div></div></li>'),toastr.success("Data Saved","ðŸ’¾ Task Action!",{closeButton:!0,tapToDismiss:!1,rtl:j}),$(o).modal("hide"),p.removeClass("show")}}))),y.on("change",".custom-checkbox",(function(t){var e=$(this).find("input");e.prop("checked")?(e.closest(".todo-item").addClass("completed"),toastr.success("Task Completed","Congratulations!! ðŸŽ‰",{closeButton:!0,tapToDismiss:!1,rtl:j})):e.closest(".todo-item").removeClass("completed")})),y.on("click",".custom-checkbox",(function(t){t.stopPropagation()})),$(document).on("click",".todo-task-list-wrapper .todo-item",(function(e){o.modal("show"),l.addClass("d-none"),r.removeClass("d-none"),$(this).hasClass("completed")?i.html('<button type="button" class="btn btn-sm btn-outline-success complete-todo-item waves-effect waves-float waves-light" data-dismiss="modal">Completed</button>'):i.html('<button type="button" class="btn btn-sm btn-outline-secondary complete-todo-item waves-effect waves-float waves-light" data-dismiss="modal">Mark Complete</button>'),h.val("").trigger("change"),$("#task-desc .ql-editor")[0].innerHTML="Chocolate cake topping bonbon jujubes donut sweet wafer. Marzipan gingerbread powder brownie bear claw. Chocolate bonbon sesame snaps jelly caramels oat cake.",t=$(this).find(".todo-title");var s=$(this).find(".todo-title").html();a.find(".new-todo-item-title").val(s)})),d.length&&d.on("click",(function(e){var s=a.valid();if(e.preventDefault(),s){var i=a.find(".new-todo-item-title").val();$(t).text(i),toastr.success("Data Saved","ðŸ’¾ Task Action!",{closeButton:!0,tapToDismiss:!1,rtl:j}),$(o).modal("hide")}})),b.length&&b.on("click",(function(){y.find("li").sort((function(t,e){return $(e).find(".todo-title").text().toUpperCase()<$(t).find(".todo-title").text().toUpperCase()?1:-1})).appendTo(C)})),k.length&&k.on("click",(function(){y.find("li").sort((function(t,e){return $(e).find(".todo-title").text().toUpperCase()>$(t).find(".todo-title").text().toUpperCase()?1:-1})).appendTo(C)})),w.length&&w.on("keyup",(function(){var t=$(this).val().toLowerCase();""!==t?($(".todo-item").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(t)>-1)})),0==$(".todo-item:visible").length?$(T).hasClass("show")||$(T).addClass("show"):$(T).removeClass("show")):($(".todo-item").show(),$(T).hasClass("show")&&$(T).removeClass("show"))})),$(window).width()>992&&p.hasClass("show")&&p.removeClass("show")})),$(window).on("resize",(function(){$(window).width()>992&&$(".body-content-overlay").hasClass("show")&&($(".sidebar-left").removeClass("show"),$(".body-content-overlay").removeClass("show"),$(".sidebar-todo-modal").modal("hide"))}));